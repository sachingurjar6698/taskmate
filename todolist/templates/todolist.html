{% extends 'base.html' %}


{% block  title %}
  <title>Todo List - Manager</title>
{% endblock title %}
{% block content %}
<div class='container'>
</br>
      {% if messages %}
        {% for message in messages %}
          <div class="alert alert-info alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
        {%endfor%}
      {% endif %}

  <form method="POST">
      {% csrf_token %}
      <label>New Task For Today!!!!</lable>
      <input type="text" class="form-control" name="task"placeholder="New Task">
      <button type="submit" class="btn btn-primary">Add Task</button>
  </form>
</br>
 <table class="table table-bordered text-center">
  <thead class="thead-dark">
  </br>
    <tr>
      <th class="col-6">Task</th>
      <th class="col-4">Done</th>
      <th class="col-2">Edit</th>
      <th class="col-2">Delete</th>
    </tr>
  </thead>
    <tbody>
        {% if all_task %}
         {% for obj in  all_task %}
            {% if obj.done %}
                  <tr class="table-success">
                          <td><del>{{obj.task}}</del></td>
                          <td><a href="{% url 'pending_task' obj.id %}"><button type="button" class="btn btn-primary">Mark As Pending</button></a></td>
                          <td><a href="{% url 'edit_task' obj.id %}"><button type="button" class="btn btn-warning">Edit Task</button></a></td>
                          <td><a href="{% url 'delete_task' obj.id %}"><button type="button" class="btn btn-danger">Delete Task</button></a></td>
                  </tr>
            {% else %}
                  <tr class="table-danger">
                          <td>{{obj.task}}</td>
                          <td><a href="{% url 'complete_task' obj.id %}"><button type="button" class="btn btn-success">Mark As Completed</button></a></td>
                          <td><a href="{% url 'edit_task' obj.id %}"><button type="button" class="btn btn-warning">Edit Task</button></a></td>
                          <td><a href="{% url 'delete_task' obj.id %}"><button type="button" class="btn btn-danger">Delete Task</button></a></td>
                  </tr>
            {% endif %}
         {% endfor %}
        {%endif%}  
    </tbody>
  </table>
  <nav aria-label="Page navigation example">
  <ul class="pagination justify-content-end">
    <li class="page-item"><a class="page-link" href="?pg=1"><<</a></li>
    {% if all_task.has_previous %}
      <li class="page-item"><a class="page-link" href="?pg={{ all_task.previous_page_number }}">{{ all_task.previous_page_number }}</a></li>
    {%endif%}
    <li class="page-item"><a class="page-link" href="?pg={{ all_task.number }}">{{ all_task.number }}</a></li>
    {% if all_task.has_next %}
      <li class="page-item"><a class="page-link" href="?pg={{ all_task.next_page_number}}">{{ all_task.next_page_number}}</a></li>
    {%endif%}
    <li class="page-item"><a class="page-link" href="?pg={{ all_task.paginator.num_pages }}">>></a></li>
  </ul>
</nav>
</div>
{% endblock content %}